# 목차

1. IoC 컨테이너
   - ApplicationContext
2. 리소스
3. Validation
4. 데이터 바인딩
5. SpEL
6. 스프링 AOP
7. Null-Safety





<br />

# 1. IoC 컨테이너

## 정의

### 1) IoC 

 : 어떤 객체가 사용하는 의존 객체를 직접 만들어 사용하는게 아니라, 주입 받아 사용하는 방법이다.

쉽게 말하면,

```java
private BookRepository bookRepository;
```

이렇게만 선언하면 null일텐데, 스프링이 `bookRepository` 에 대한 정보를 주입을 해줘서 바로 사용을 할 수 있다.



<br />

### 2) IoC 컨테이너 

 : Bean들을 가지고 IoC 기능을 제공하는 컨테이너이다.

ex)

- BeanFactory : IoC컨테이너 최상위 인터페이스이다.
- ApplicationContext : BeanFactory를 상속받은 IoC컨테이너로, 가장 많이 사용한다.



<br />

### 3) Bean

 : **IoC 컨테이너에 의해 관리되는 객체**이다.

#### 장점

1. IoC컨테이너에 의해 **의존성 관리**가 된다.

2. IoC컨테이너에 등록된 Bean은 기본적으로 **싱글톤**으로 등록되어 싱글톤으로 사용하려고 할 때, 편하다.

   cf) 스코프

   - 싱글톤 : 하나만 만들어서 전체에 사용하는것
   - 프로토타입 : 매번 다른 객체

3. **라이프 사이클 인터페이스** 로 부가적인 작업을 할 수 있다.

   (Bean에 등록되면서 호출되는 메서드들을 이용하는 경우를 말한다.)



<br />

# 1-1. ApplicationContext

### 1) (고전적인) Bean 등록 방법

: 스프링 IoC 컨테이너는 빈설정(xml) 파일이 있어야한다. 가령, `BookService` 가 `BookRepository` 를 주입받는다고 해보자.

```java
public class BookService{
   BookRepository bookRepository;

   public void setBookRepository(BookRepository bookRepository){
      this.bookRepository = bookRepository;
   }
}
```

이를 위해서는, 다음과 같이 일일이 Bean으로 등록을 해줘야 했다.

**application.xml**

```xml
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

  	<!-- 여기부터 -->
    <bean id="bookRepository"
        class="com.example.demo.BookRepository">
    </bean>
    
    <bean id="bookService"
        class="com.example.demo.BookService">
        <property name="bookRepository" ref="bookRepository" />
    </bean>
  	<!-- 여기까지 주목 -->
  
</beans>
```

<br />
이런 불편함을 해결하는 방법이 Component Scan으로 간편하게 빈을 등록하는 것이다.

**application.xml**

```xml
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd">

   <!-- 여기부터 -->
    <context:component-scan base-package="com.example.demo" />
   <!-- 여기까지 주목 -->
</beans>
```

위처럼 해주면,
 - Bean 등록 : @Component, @Service, @Repository, @Configuration+@Bean 조합 등
 - 의존성 주입 : @Autowired, 생성자, setter 등






<br />

# 메모

1. mock 객체

   : 테스트 코드를 작성할 때, **의존성 문제**로 특정 객체를 생성하는데 어려운 경우 만드는 가짜 객체이다.

   [사용법]

   - mock객체를 만든다. 
     - mock() 함수 이용
     - @Mock이용
   - when(A).thenReturn(B); 

   [예시]

   ```java
   @Mock
   BookRepository bookRepository; // cal메소드 : 10을 반환하는 메소드
   
   @Test
   public void calTest(){
     when(bookRepository.cal()).thenReturn(10);
   }
   ```

   



